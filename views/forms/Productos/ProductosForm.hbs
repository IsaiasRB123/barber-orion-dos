<!DOCTYPE html>
<html lang="es">
{{> head}}

<body>
    <!-- SideBar -->
    {{> sidebar}}

    <!-- Content page-->
    <section class="full-box dashboard-contentPage">
        <!-- NavBar -->
        <nav class="full-box dashboard-Navbar">
            <ul class="full-box list-unstyled text-right">
                <li class="pull-left">
                    <a href="#!" class="btn-menu-dashboard"><i class="zmdi zmdi-more-vert"></i></a>
                </li>
                <li>
                    <a href="#!" class="btn-Notifications-area">
                        <i class="zmdi zmdi-notifications-none"></i>
                        <span class="badge">7</span>
                    </a>
                </li>
                <li>
                    <a href="#!" class="btn-search">
                        <i class="zmdi zmdi-search"></i>
                    </a>
                </li>
                <li>
                    <a href="#!" class="btn-modal-help">
                        <i class="zmdi zmdi-help-outline"></i>
                    </a>
                </li>
            </ul>
        </nav>
        <!-- form -->
        <div class="container" style="margin-top: 60px;">
            <div class="row justify-content-center">
                <div class="col-md-6 ">
                    <section class="container-form">
                        <header>Registrar Productos</header>
                        <form class="form-admin" id="formulario">
                            <div class="row">
                                <div class="input-box" id="grupo__nombre">
                                    <label for="nombre">*Producto</label>
                                    <input type="text" name="nombre" id="nombre">
                                    <p class="formulario__input-error">No se permite símbolos o números en este campo</p>
                                </div>
                                <div class="input-box" id="grupo__cantidad">
                                    <label for="cantidad">*Cantidad </label>
                                    <input type="text" name="cantidad" id="cantidad">
                                    <p class="formulario__input-error">Ingrese un valor válido</p>
                                </div>
                                <div class="input-box" id="grupo__precio">
                                    <label for="precio">*Precio unitario</label>
                                    <input type="text" name="precio" id="precio">
                                    <p class="formulario__input-error">Ingrese un valor válido</p>
                                </div>
                                <div class="input-box address">
                                    <label for="categoria">*Categoría</label>
                                    <div class="select-box">
                                        <select id="categoria">
                                            <option value="Accesorios">Accesorios</option>
                                            <option value="Moda">Moda</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div style="text-align: center;">
                                <button type="button" onclick="registrarProducto()">Registrar</button>
                                <a href="/ProductoAdmin" style="text-decoration:none;">Cerrar</a>
                            </div>
                        </form>
                    </section>
                </div>
            </div>
        </div>
        <!-- Bootstrap JS, jQuery, y Popper.js -->
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>
        <script>
            $.material.init();
        </script>
        <script src="./js/sweetalert2.min.js"></script>
        <script src="./js/ripples.min.js"></script>
        <script src="./js/jquery.mCustomScrollbar.concat.min.js"></script>
        <script src="./js/main.js"></script>
        <script src="./js/validaciones/validacionesProductos.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.3.0/dist/sweetalert2.all.min.js"></script>
        <script>
            function registrarProducto() {
                var nombre = document.getElementById('nombre').value;
                var cantidad = document.getElementById('cantidad').value;
                var precio = document.getElementById('precio').value;
                var categoria = document.getElementById('categoria').value;

                var nuevoProducto = {
                    nombre: nombre,
                    cantidad: cantidad,
                    precio: precio,
                    categoria: categoria
                };

                $.ajax({
                    type: 'POST',
                    url: 'http://localhost:5062/api/producto',
                    contentType: 'application/json',
                    data: JSON.stringify(nuevoProducto),
                    success: function (response) {
                        Swal.fire({
                            title: '¡Éxito!',
                            text: 'El producto ha sido registrado exitosamente.',
                            backdrop: false,
                            icon: 'success'
                        });
                        // Limpiar el formulario después del registro
                        document.getElementById("formulario").reset();
                    },
                    error: function (xhr, status, error) {
                        console.error('Error al registrar producto:', error);
                        Swal.fire({
                            title: 'Error',
                            text: 'Hubo un error al intentar registrar el producto.',
                            icon: 'error'
                        });
                    }
                });
            }
        </script>
</body>

</html>
