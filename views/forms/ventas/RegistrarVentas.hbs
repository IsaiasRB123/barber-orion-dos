<!DOCTYPE html>
<!-- bootstrap -->
{{> head}}


<body>
    <!-- SideBar -->
    {{> sidebar}}

    <!-- Content page-->
    <section class="full-box dashboard-contentPage m-6">
        <!-- NavBar -->
        {{> navAdmin}}
        <!-- Content page -->
        <div class="container-fluid">
            <div class="page-header" style="display: flex; justify-content: space-between; align-items: center;">
                <h1 class="text-titles" style="margin: 0;"><svg xmlns="http://www.w3.org/2000/svg" width="40px"
                        height="40px" fill="currentColor" class="bi bi-cash-coin" viewBox="0 0 16 16"
                        style="margin-right: 10px;">
                        <path fill-rule="evenodd"
                            d="M11 15a4 4 0 1 0 0-8 4 4 0 0 0 0 8m5-4a5 5 0 1 1-10 0 5 5 0 0 1 10 0" />
                        <path
                            d="M9.438 11.944c.047.596.518 1.06 1.363 1.116v.44h.375v-.443c.875-.061 1.386-.529 1.386-1.207 0-.618-.39-.936-1.09-1.1l-.296-.07v-1.2c.376.043.614.248.671.532h.658c-.047-.575-.54-1.024-1.329-1.073V8.5h-.375v.45c-.747.073-1.255.522-1.255 1.158 0 .562.378.92 1.007 1.066l.248.061v1.272c-.384-.058-.639-.27-.696-.563h-.668zm1.36-1.354c-.369-.085-.569-.26-.569-.522 0-.294.216-.514.572-.578v1.1zm.432.746c.449.104.655.272.655.569 0 .339-.257.571-.709.614v-1.195z" />
                        <path
                            d="M1 0a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h4.083q.088-.517.258-1H3a2 2 0 0 0-2-2V3a2 2 0 0 0 2-2h10a2 2 0 0 0 2 2v3.528c.38.34.717.728 1 1.154V1a1 1 0 0 0-1-1z" />
                        <path d="M9.998 5.083 10 5a2 2 0 1 0-3.132 1.65 6 6 0 0 1 3.13-1.567" />
                    </svg>Registrar Venta
                </h1>
                <a class="Btn-Volver" href="/ventas" style=" float: inline-start;text-decoration:none;">
                    <svg xmlns="http://www.w3.org/2000/svg" height="14" width="12.25" viewBox="0 0 448 512"><!--!Font Awesome Free 6.5.2 by @fontawesome -
                        https://fontawesome.com License - https://fontawesome.com/license/free
                        Copyright 2024 Fonticons, Inc.-->
                        <path fill="#ffffff" d="M9.4
                        233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3
                        0s12.5-32.8 0-45.3L109.2 288 416 288c17.7 0 32-14.3
                        32-32s-14.3-32-32-32l-306.7 0L214.6 118.6c12.5-12.5 12.5-32.8
                        0-45.3s-32.8-12.5-45.3 0l-160 160z" />
                    </svg>
                </a>
            </div>
            <div class="Contenttt">
                <div class="container">
                    <div class="row">
                        <div class="col">
                            <form action="" id="formulario">
                                <div class="flex-container-registro-2">
                                    <div class="input-wrapper" id="grupo__nombre">
                                        <label for="nombre">Nombre del cliente:</label>
                                        <div class="select-box flex-container-registro">
                                            <select id="nombre" style="height: 40px;">
                                                <option hidden="">Seleccione un cliente</option>
                                            </select>
                                        </div>
                                        <p class="formulario__input-error">Por favor selecciona un cliente</p>
                                    </div>
                                </div>
                        </div>
                    </div>
                    <div class="row">
                        <h1 class="text-titles">Productos</h1>
                        <div class="col">
                            <div class="select-box flex-container-registro">
                                <select id="productos" onchange="actualizarPrecio()">
                                    <option hidden="">Seleccione un producto</option>
                                </select>
                                <input type="text" id="cantidad" class="email" placeholder="Cantidad">
                                <input type="text" id="precio" class="email" placeholder="Precio">
                                <a class="Btn-chek" data-toggle="modal" onclick="renderProductoVentas()"
                                    style="float: inline-end; margin-right: 40px; margin-top: 5px;">
                                    <svg xmlns="http://www.w3.org/2000/svg" height="10" width="8.75"
                                        viewBox="0 0 448 512">
                                        <path fill="#ffffff"
                                            d="M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z" />
                                    </svg>
                                </a>
                            </div>
                        </div>
                    </div>
                    <!-- modal uno ver -->
                    <!-- <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#modu">
                  Launch demo modal
                </button> -->
                    <!-- /.card-header -->
                    <div class="container border border-dark-3 pt-4">
                        <div class="row">
                            <div class="col">
                                <table class="table table-striped table-bordered table-hover">
                                    <thead>
                                        <tr>
                                            <th>Producto</th>
                                            <th>Cantidad</th>
                                            <th>Precio</th>
                                            <th>Subtotal</th>
                                            <th>Iva</th>
                                            <th>Subtotal Iva</th>
                                            <th>MontoTotal</th>
                                            <th>Acciones</th>
                                        </tr>
                                    </thead>
                                    <tbody id="ProductosVentas">
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="mb-3 mt-3">
                        <h6 class="MontoTotalTitle" style="float: inline-start;">Monto Total: 510.000</h6>
                        <a class="Btn" data-toggle="modal" onclick="GuardarVenta()"
                            style="float: inline-end;margin-right:40px;margin-top:5px; color:white">
                            Registrar Venta<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                fill="currentColor" class="bi bi-cash-stack" viewBox="0 0 16 16">
                                <path d="M1 3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1zm7 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4" />
                                <path
                                    d="M0 5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1zm3 0a2 2 0 0 1-2 2v4a2 2 0 0 1 2 2h10a2 2 0 0 1 2-2V7a2 2 0 0 1-2-2z" />
                            </svg></a>
                    </div>
                    </form>

                </div>

                <!-- Bootstrap JS, jQuery, y Popper.js -->
                <script>
                    $.material.init();
                </script>
                <script src="./js/jquery-3.1.1.min.js"></script>
                <script src="./js/sweetalert2.min.js"></script>
                <script src="./js/bootstrap.min.js"></script>
                <script src="./js/material.min.js"></script>
                <script src="./js/ripples.min.js"></script>
                <script src="./js/validaciones/productos.js"></script>
                <script src="./js/validaciones/validacionesVentas.js"></script>
                <script src="./js/jquery.mCustomScrollbar.concat.min.js"></script>
                <script src="./js/main.js"></script>
                <script src="./js/sweetalert.js"></script>
                <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
                <script>
                    document.addEventListener('DOMContentLoaded', function () {
                        // Hacer una solicitud GET a la API de clientes utilizando Axios
                        axios.get('http://localhost:5235/api/Cliente')
                            .then(function (response) {
                                let clientes = response.data;
                                let selectClientes = document.getElementById('nombre');

                                // Limpiar el select actual

                                // Iterar sobre la lista de clientes y agregar opciones al select

                                clientes.forEach(function (cliente) {
                                    if (cliente.estado == true) {
                                        var option = document.createElement('option');
                                        option.value = cliente.idCliente;
                                        option.textContent = cliente.nombre;
                                        selectClientes.appendChild(option);
                                    }
                                });
                            })
                            .catch(function (error) {
                                console.error('Error al obtener la lista de clientes:', error);
                            });
                    });
                </script>
</body>

</html>